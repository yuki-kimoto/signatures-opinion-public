<!DOCTYPE html>
<html>
  <head>
    <!-- meta -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="icon" type="image/x-icon" href="/signatures-opinion-public/images/giblog-logo.png">
<link rel="stylesheet" type="text/css" href="/signatures-opinion-public/css/common.css">

<title>Type Constraints using Type::Tiny and attribute handler - Perl Subroutine Signatures Opinion Blog</title>
<meta name="description" content="If you can perform type checking with an attribute handler and Type::Tiny, Perl will be more attractive.">
  </head>
  <body>
    <div class="container">
      <div class="header">
        <!-- header -->
<div class="main">
  <h1>
    <a href="/signatures-opinion-public/">Perl Subroutine Signatures Opinion Blog</a>
  </h1>
  <div>
    This site is an opinion blog about Perl Subroutine Signatures. Subroutine Signatures is plan to added to Perl in the near future. I have a very strong concern in the future of Perl, so I created an independent site about sub signatures. My name is Yuki Kimoto. I'm Perl Light User. I have no media power, community power, political power, and big company power. I just feel and talk about the heart of a weak perl user without a voice.
  </div>
</div>

      </div>
      <div class="main">
        <div class="content">
          <div class="entry">
  <div class="top">
    <!-- top -->

  </div>
  <div class="middle">
    <h2><a href="/signatures-opinion-public/blog/20191223153633.html">Type Constraints using Type::Tiny and attribute handler</a></h2>
<p>
  If you can perform type checking with an attribute handler and <a href="https://metacpan.org/pod/Type::Tiny">Type::Tiny</a>, Perl will be more attractive.
</p>
<p>
  For example.
</p>
<pre>
use Type::Tiny::Signatures;

sub foo ($str : Str, $num : Int) {
  
}
</pre>
<h3>What is attribute handler?</h3>
<p>
  The attribute handler is a function that can handle the attribute setting of subroutines and variables from Perl 5.6.
</p>
<pre>
#!perl -w
use strict;

sub MODIFY_CODE_ATTRIBUTES{
  my($class, $code_ref, $attr_name) = @_;
  Dump($code_ref);
}

# Subroutine attribute
sub foo : MyAttr {

}
</pre>
<p>
  Perl already has a syntax called attributes.
</p>
<pre>
sub foo : attribute
</pre>
<h3>Attribute for arguments of subroutine signatures</h3>
<p>
  We are fortunate.
</p>
<p>
  Aattributes of subroutine argument are not yet implemented.
</p>
<p>
  We can implement the use of subroutine attributes without worrying about the past.
</p>
<p>
  It would be nice to be able to check arguments by combining a subroutine argument attribute handler with <a href="https://metacpan.org/pod/Type::Tiny">Type::Tiny</a>.
</p>
<pre>
use Type::Tiny::Signatures;

sub foo ($str : Str, $num : Int) {
  
}
</pre>
<h3>Perl core is all dynamic, and you can add listrictions by module</h3>
<p>
  We have known for 30 years that all Perl core is dynamic.
</p>
<p>
  Perl has no restrictions by default.
</p>
<p>
  On the other hand, you can incorporate constraints by using modules.
</p>
<p>
  For example,
</p>
<p>
  <a href="https://metacpan.org/pod/fields">fields</a> modules for field listrictions.
</p>
<p>
  <a href="https://metacpan.org/pod/Hash::Util">Hash::Util::lock_keys</a> for hash key listrictions.
</p>
<p>
  Sure, <a href="https://metacpan.org/pod/Type::Tiny">Type::Tiny</a> for type constraints.
</p>
<p>
  This is 30 years of Perl convention.
</p>
<p>
  If signatures is dynamic and, add listrictions by module and attribute handler,
</p>
<p>
  We are likely to be able to work with the old and the new and solve the Perl community's dissatisfaction.
</p>
<p>
  I hope that older users who have enjoyed the dynamic types of Perl can collaborate with the Perl community who wanted to do type checking.
</p>
<p>
  I suggest an implementation where <a href="https://metacpan.org/pod/Type::Tiny">Type::Tiny</a> works correctly with subroutine signatures.
</p>
<h3>Toby proposal</h3>
<p>
  I discussion about Type::Tiny with Toby Inkster in blogs.perl.org.
</p>
<p>
  <a href="http://blogs.perl.org/users/yuki_kimoto/2019/12/type-constraints-using-typetiny-and-attribute-handler-of-subroutine-signatures.html">Type Constraints using Type::Tiny and attribute handler of subroutine signatures</a>
</p>

  </div>
  <div class="bottom">
    <!-- bottom -->

  </div>
</div>

        </div>
        <div class="side">
          <!-- side -->
<div class="side-list">
  <div class="side-list-title">
    Content
  </div>
  <ul>
    <li><a href="/signatures-opinion-public/list.html">Entries</a></li>
    <li><a href="/signatures-opinion-public/blog/20190319121234.html">Why we want subroutine signatures?</a></li>
    <li><a href="/signatures-opinion-public/blog/20191216153849.html">Risk increased by checking the number of subroutine arguments</a><span style="color:gold">★★★</span></li>
    <li><a href="/signatures-opinion-public/blog/20191217163216.html">Are array and hash representations really needed?</a><span style="color:gold">★</span></li>
    <li><a href="/signatures-opinion-public/blog/20191218170414.html">Is the new grammar easy to google search?</a><span style="color:gold">★</span></li>
    <li><a href="/signatures-opinion-public/blog/20191220163642.html">The way that CPAN authors use subroutine signatures in natural</a><span style="color:gold">★★★</span></li>
    <li><a href="/signatures-opinion-public/blog/20191223153633.html">Type Constraints using Type::Tiny and attribute handler</a><span style="color:gold">★★</span></li>
    <li><a href="/signatures-opinion-public/blog/20191224114859.html">Default value expression</a><span style="color:gold"></span></li>
    <li><a href="/signatures-opinion-public/blog/20191225153218.html">Larry said "No one sews a patch of unshrunk cloth on an old garment"</a><span style="color:gold"></span></li>
  </ul>
</div>

        </div>
      </div>
      <div class="footer">
        <!-- footer -->
<a href="https://github.com/yuki-kimoto/giblog">Giblog</a>

      </div>
    </div>
  </body>
</html>
